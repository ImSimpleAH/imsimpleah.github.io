<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>28th CAD Editable Site</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts & Styles -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />

  <!-- Editor.js Core + Tools -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/paragraph@latest"></script>
</head>
<body>

  <!-- Edit Mode Toggle Button -->
  <button id="edit-toggle">âœï¸ Enter Edit Mode</button>

  <!-- Default View Content -->
  <div class="content-container" id="view-mode">
    <h1>Welcome to the 28th Combined Arms Division</h1>
    <p>This website is editable in real-time using a block-style editor. Click the Edit Mode button to start editing.</p>
  </div>

  <!-- Hidden Editor Container -->
  <div id="editorjs" style="display: none;"></div>
  <button id="save-btn" style="display:none;">ğŸ’¾ Save Content</button>

  <footer>
    <p>&copy; 2025 28th CAD | All Rights Reserved</p>
  </footer>

  <!-- Scripts (loaded last!) -->
  <script>
    let editor;
    let editVisible = false;

    document.getElementById('edit-toggle').addEventListener('click', toggleEditMode);
    document.getElementById('save-btn').addEventListener('click', saveData);

    function toggleEditMode() {
      const editorContainer = document.getElementById('editorjs');
      const saveButton = document.getElementById('save-btn');
      const viewMode = document.getElementById('view-mode');
      const editButton = document.getElementById('edit-toggle');

      if (!editVisible) {
        editorContainer.style.display = 'block';
        saveButton.style.display = 'inline-block';
        viewMode.style.display = 'none';
        editButton.innerText = 'ğŸš« Exit Edit Mode';

        if (!editor) {
          editor = new EditorJS({
            holder: 'editorjs',
            tools: {
              header: {
                class: Header,
                inlineToolbar: true,
                config: {
                  placeholder: 'Enter a header'
                }
              },
              paragraph: {
                class: Paragraph,
                inlineToolbar: true
              }
            },
            placeholder: 'Start writing your content here...',
            autofocus: true
          });
        }

        editVisible = true;
      } else {
        editorContainer.style.display = 'none';
        saveButton.style.display = 'none';
        viewMode.style.display = 'block';
        editButton.innerText = 'âœï¸ Enter Edit Mode';
        editVisible = false;
      }
    }

    function saveData() {
  if (!editor) return;

  editor.save().then((outputData) => {
    console.log("Saved Output:", outputData);
    alert("Saved! (Check console for now)");

    // Exit edit mode after save
    toggleEditMode();

  }).catch((error) => {
    console.error("Saving failed: ", error);
  });
}

  </script>

</body>
</html>
